#!/Users/lynn/myenv/bin/python

from tabulate import tabulate

headers = ['Item', 'Description', 'Amount (USD)']

# Function to collect user input
def collect_rows(num_rows):
    rows = []
    total_amount = 0 
    for i in range(num_rows):
        print(f"\nLINE-ITEM {i + 1}:")
        item = input("Item: ")
        descr = input("Description: ")
        try:
            amount = float(input("Amount (USD): "))
        except ValueError:
            print("Invalid amount. Please enter a valid number.")
            return rows, total_amount
        
        rows.append([item, descr, f"${amount:.2f}"])
        
        # Update the total amount
        total_amount += amount

    return rows, total_amount

# Main function
def main():
    try:
        num_rows = int(input("How many line-items would you like to add? "))
    except ValueError:
        print("Please enter a valid number!")
        return
    
    # Collect the data for the specified number of rows
    rows, total_amount = collect_rows(num_rows)

    # Display the main table (without the TOTAL row)
    table = tabulate(rows, headers=headers, tablefmt="grid")
    print(table)

    # Add and display the TOTAL row as a footer
    footer = tabulate([['TOTAL', f"${total_amount:.2f}"]], tablefmt="grid")
    print("\n" + footer)

if __name__ == "__main__":
    main()

