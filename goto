#!/bin/zsh

# Check if both arguments are provided
if [[ -z "$1" || -z "$2" ]]; then
    echo "Usage: $0 <filename> <link_number>"
    exit 1
fi

# Assign the arguments to variables
LINKS_FILE="$1"
LINK_NUMBER="$2"

# Debug: Print the file path to check
echo "Checking file path: $LINKS_FILE"

# Check if the file exists
if [[ ! -f "$LINKS_FILE" ]]; then
    echo "File '$LINKS_FILE' not found."
    exit 1
fi

# Extract the link based on the provided number, ignoring the first two lines
LINK_LINE=$(sed -n "$((LINK_NUMBER + 2))p" "$LINKS_FILE" | sed -E 's/.*\((http[^)]+)\).*/\1/')

if [[ -n "$LINK_LINE" ]]; then
    # Open the URL in the default web browser
    open "$LINK_LINE"
else
    echo "Invalid link number or file format issue."
    exit 1
fi

